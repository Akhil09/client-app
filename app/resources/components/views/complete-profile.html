<script>
  $('.ui.dropdown').dropdown();
  $("#uploader").click(function() {
    $('#upload-tag').trigger('click');
  });

  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
          $('#image-preview').attr('src', e.target.result);
      }

      reader.readAsDataURL(input.files[0]);
    }
  }

  $("#upload-tag").change(function(){
      readURL(this);
  });

  $('.ui.form')
    .form({
      fields: {
        club: {
          identifier: 'club_id',
          rules: [ { type   : 'empty', prompt : 'Na boa, você não torce pra niguém?' } ]
        },
        username: {
          identifier: 'username',
          rules: [ { type   : 'empty', prompt : 'Um nome de usuário, pode ser o apelido!' } ]
        }
      }
    });
</script>

<div class="ui middle aligned center aligned grid">
  <div class="column margin-top">
    <div class="ui message">
      <h2 class="ui header title-auth">
        Só falta assinar!
  	  </h2>
    </div>

	  <form role="form" class="ui large form">
      <div class="ui stacked segment">
        <div class="field profile-image">
          <div class="ui small rounded image">
            <div class="ui blurring dimmer">
              <div class="content">
                <a href id="uploader" class="center" title="Trocar Foto">
                  <i class="big icons">
                    <i class="photo inverted icon"></i>
                    <i class="corner inverted add icon"></i>
                  </i>
                </a>
                <input id="upload-tag" style="display:none" type="file" accept="image/*" />
              </div>
            </div>
            <img id="image-preview" src="{{update_form.image}}" class="ui image">
          </div>
        </div>
        <div class="field">
          <div class="ui left icon input">
            <i class="user icon"></i>
            <input type="text" name="username" title="Nome de Usuário" placeholder="Nome de Usuário" ng-model="update_form.username" required="required">
          </div>
        </div>

        <div class="field">
          <div class="ui search selection labeled dropdown">
            <input type="hidden" name="club_id" id="club_id" />

            <i class="dropdown icon"></i>
            <div class="default text">
              Para qual time você torce?
            </div>

            <div class="menu">
              <div class="item" data-value="{{club.id}}" ng-repeat="club in clubs">
                <img ng-src="{{ club.shield }}" class="ui mini image">
                {{club.short_name}}
              </div>
            </div>
          </div>
        </div>

				<a ng-click="save()" class="ui fluid large dark-blue submit button">Cair pra dentro</a>
      </div>

			<div class="ui error message"></div>
		</form>
  </div>
</div>
